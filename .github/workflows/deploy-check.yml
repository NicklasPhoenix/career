name: Deploy Check
on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  check-site:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Validate site structure
        run: |
          echo "üîç Checking site structure..."
          
          # Verify all main pages exist
          if [ ! -f "index.html" ]; then
            echo "‚ùå Missing main index.html"
            exit 1
          fi
          
          if [ ! -f "blog/index.html" ]; then
            echo "‚ùå Missing blog/index.html"
            exit 1
          fi
          
          if [ ! -f "guides/index.html" ]; then
            echo "‚ùå Missing guides/index.html"
            exit 1
          fi
          
          if [ ! -f "tools/index.html" ]; then
            echo "‚ùå Missing tools/index.html"
            exit 1
          fi
          
          if [ ! -f "css/styles.css" ]; then
            echo "‚ùå Missing css/styles.css"
            exit 1
          fi
          
          echo "‚úÖ All required files exist"
      
      - name: Check navigation links
        run: |
          echo "üîç Checking navigation consistency..."
          
          # Count pages to ensure we have content
          BLOG_PAGES=$(find blog -name "*.html" -not -name "index.html" | wc -l)
          GUIDE_PAGES=$(find guides -name "*.html" -not -name "index.html" | wc -l)
          TOOL_PAGES=$(find tools -name "*.html" -not -name "index.html" | wc -l)
          
          echo "Found $BLOG_PAGES blog articles"
          echo "Found $GUIDE_PAGES guide pages"
          echo "Found $TOOL_PAGES tool pages"
          
          if [ "$BLOG_PAGES" -lt 3 ]; then
            echo "‚ö†Ô∏è  Warning: Low number of blog articles"
          fi
          
          echo "‚úÖ Content structure validated"
      
      - name: Site ready for deployment
        run: |
          echo "üéâ Site validation complete!"
          echo "The career site is ready for GitHub Pages deployment"
          echo "üìç Site will be available at: https://[username].github.io/career/"